\section{Case example}\label{sec:case-example}
Earlier, this report gave an abstract explanation of how the system should work and the more concrete implementation using the different components of both the software and the hard system. Subsequently, this section gives a real-world example of a user experience in the parking garage. Due to the large size of the flowcharts, they are included in Appendix \ref{app:flowcharts}.

\ind The process begins with the user who drives towards the entry barrier. An \ac{udms} detects the car and sends a signal to the \ac{anpr}-camera which takes a picture of the licence plate. This picture is then analyzed by the Google Vision \ac{api}. Then the recognised string from the licence plate is sent to the backend with a \texttt{POST}-request to \texttt{api/plate}. The system supports two use cases: either the user has a registered account with a licence plate, or the user has not. In both cases the user should be able to use the parking garage. The backend checks which of the two cases the received licence plate falls in. In the former, the barrier will be opened and the \verb|licence_plate|-table is updated to include the time of arrival. In the latter case, the backend will create a new user account and print a paper ticket with a \ac{qr}-code which contains a link to the created account. With this dummy account the user can view all the information about his park. This dummy account is deleted when the user exits the garage, compliant to current \ac{gdpr}-guidelines. Figure \ref{fig:garage-enter} in Appendix \ref{app:flowcharts} shows a schematic overview of the entering process. \\

After entering the garage, the user drives to the pre-booked parking lot, in which case the occupancy of the parking lot is already set to \texttt{True} or to a parking lot of choice. In the latter case, an \ac{udms} detects the cars, so that the Raspberry Pi can sent an \ac{api}-request to the backend to update the respective table. Note that only if the parking lot is booked, the parking lot is associated with the licence plate and thus with the user. Figure \ref{fig:car-detection} in Appendix \ref{app:flowcharts} shows a schematic overview of this process. \\

When exiting the garage, it is recommended that users pays their tickets in advance, to make the exiting-process run smoothly, but the system also supports payments in front of the barrier for users who might have forgotten to pay.

\ind In a similar way as when entering, a \ac{udms} detects the car and the \ac{anpr}-camera takes a picture, which is sent to the Google Vision \ac{api} for analysis. Subsequently, the recognised text is sent to the backend via the same \ac{url}. The backend can distinguish the images for entering and exiting the garage via the \verb|licence_plates|-tables which stores whether a licence plate is currently inside the garage. This table also contains a column which indicates if the user connected to the licence plate has already paid. If this is the case, the barrier will open. In the opposite case, there are two possibilities: the user has an account which supports automatic payments, in which case the payment will happen in situ and the barrier will open consequently. In the case in which the user has not paid, nor has an account which supports automatic payment, a paper ticket will be printed with a \ac{qr}-code which redirects the user to a payment-environment. Once the user has paid its ticket, the barrier will open. Figure \ref{fig:garage-exit} in Appendix \ref{app:flowcharts} shows a schematic overview of the exiting process. \\


Note that the need of paper tickets is not fully eliminated in this user flow, but is only used as a back-up system if the user does not have an account or forgot to pay. In both cases, the user will be able to use the parking garage with almost the same features as a user who installed the application. \\

Garage owners can change all the settings of their garage. This applies to non-essential settings (like the amount of parking lots for electric cars or the maximum height for cars in the garage) as well as too crucial ones like the location or prices of the garage. Garage owners can do this in the same app as their customers. For them, there is an extra list with all their owned garages. By selecting a garage, they can change the settings on a custom settings page. When they confirm their changes, they will also show up on the app of the customers. \\ % + figuur